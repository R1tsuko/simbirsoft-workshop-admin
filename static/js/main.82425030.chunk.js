(this["webpackJsonpsimbirsoft-workshop-admin"]=this["webpackJsonpsimbirsoft-workshop-admin"]||[]).push([[0],{10:function(e,t,r){e.exports={header:"Header_header__2GKyS",burgerMenuButtonWrapper:"Header_burgerMenuButtonWrapper__3qjzo",burgerButton:"Header_burgerButton__1oI7t",line:"Header_line__2W0aJ",burger:"Header_burger__dq3sy",active:"Header_active__2TO_7",x:"Header_x___wYrR",notifications:"Header_notifications__32d0A",notificationsWrapper:"Header_notificationsWrapper__2m7c_",count:"Header_count__2EF_F",userDetails:"Header_userDetails__2stiT",dropdownIconWrapper:"Header_dropdownIconWrapper__2TICy"}},105:function(e,t,r){},229:function(e,t,r){"use strict";r.r(t);var a=r(0),n=r.n(a),s=r(43),c=r.n(s),i=r(55),o=(r(105),r(33)),u=r(6),l=r(20),d=r(45),p=r(100),j=r(19),h=r(11),b=function(){return Object(o.b)()},f=o.c,m=r(2),g=r.n(m),_=r(7),x=r(23),O="tokensDetails",v=function(e){return btoa("".concat(function(e){for(var t="",r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",a=r.length,n=0;n<e;n+=1)t+=r.charAt(Math.floor(Math.random()*a));return t}(e),":").concat("4cbcea96de"))},k=function(){var e=localStorage.getItem(O);if(!e)return null;var t=JSON.parse(e),r=t.expireDate,a=t.authToken,n=t.refreshToken;return r<(new Date).getTime()?null:{authToken:a,refreshToken:n}},N=r(4),w=r(5),L=r(57),W=r.n(L),y=function(){function e(){Object(N.a)(this,e),this.accessTokenInterceptor=void 0,this.instance=void 0,this.accessTokenInterceptor=null,this.instance=W.a.create({baseURL:"https://api-factory.simbirsoft1.com/api/",headers:{"X-Api-Factory-Application-Id":"5e25c641099b810b946c5d5b"}})}return Object(w.a)(e,[{key:"login",value:function(){var e=Object(_.a)(g.a.mark((function e(t,r){var a,n,s;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.username,n=t.password,e.next=3,this.instance.post("auth/login",{username:a,password:n},{headers:{Authorization:"Basic ".concat(r)}});case 3:return s=e.sent,e.abrupt("return",s.data);case 5:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"refresh",value:function(){var e=Object(_.a)(g.a.mark((function e(t,r){var a;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.instance.post("auth/refresh",{refresh_token:t},{headers:{Authorization:"Basic ".concat(r)}});case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"check",value:function(){var e=Object(_.a)(g.a.mark((function e(){var t;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.instance.get("auth/check");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"logout",value:function(){var e=Object(_.a)(g.a.mark((function e(){var t;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.instance.post("auth/logout");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"injectAccessToken",value:function(e){this.accessTokenInterceptor=this.instance.interceptors.request.use((function(t){return Object(l.a)(Object(l.a)({},t),{},{headers:Object(l.a)(Object(l.a)({},t.headers),{},{Authorization:"Bearer ".concat(e)})})}))}},{key:"ejectAccessToken",value:function(){this.accessTokenInterceptor&&W.a.interceptors.request.eject(this.accessTokenInterceptor)}}]),e}(),M=new y,C=Object(x.b)("auth/login",function(){var e=Object(_.a)(g.a.mark((function e(t,r){var a,n,s;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=r.dispatch,e.prev=1,n=v(15),e.next=5,M.login(t,n);case 5:s=e.sent,q(s,a,n),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),401===e.t0.response.status&&a(B());case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t,r){return e.apply(this,arguments)}}()),F=Object(x.b)("auth/tryAutoLogin",function(){var e=Object(_.a)(g.a.mark((function e(t,r){var a,n,s;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=r.dispatch,!(n=k())){e.next=7;break}return e.next=5,M.refresh(n.refreshToken,n.authToken);case 5:s=e.sent,q(s,a,n.authToken);case 7:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()),S=Object(x.b)("auth/logout",Object(_.a)(g.a.mark((function e(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,M.logout();case 2:M.ejectAccessToken(),localStorage.removeItem(O);case 4:case"end":return e.stop()}}),e)})))),T=Object(x.c)({name:"auth",initialState:{isLoggedIn:!1,isLoginError:!1,isSubmitting:!1},reducers:{setIsLoggedIn:function(e,t){e.isLoggedIn=t.payload},loginSuccess:function(e){e.isLoggedIn=!0,e.isLoginError=!1},loginFail:function(e){e.isLoginError=!0}},extraReducers:function(e){e.addCase(C.pending,(function(e){e.isSubmitting=!0})).addCase(C.fulfilled,(function(e){e.isSubmitting=!1})).addCase(F.pending,(function(e){e.isSubmitting=!0})).addCase(F.fulfilled,(function(e){e.isSubmitting=!1})).addCase(S.fulfilled,(function(e){e.isLoggedIn=!1}))}}),I=T.actions,H=I.loginSuccess,B=I.loginFail,E=function(e){return e.auth.isLoggedIn},A=function(e){return e.auth.isLoginError},D=function(e){return e.auth.isSubmitting},q=function(e,t,r){M.injectAccessToken(e.access_token),function(e,t,r){var a={expireDate:(new Date).getTime()+1e3*e,refreshToken:t,authToken:r};localStorage.setItem(O,JSON.stringify(a))}(e.expires_in,e.refresh_token,r),t(H())},J=T.reducer,V=r(58),P=r.n(V),z=r(1),R=function(){return Object(z.jsx)("div",{className:P.a.loaderWrapper,children:Object(z.jsx)("div",{className:P.a.loader})})},G=r(8),Z=r.n(G),K=function(){var e,t,r=b(),a=f(A),n=f(D),s=d.a({username:d.b().max(15,"\u041d\u0435 \u0431\u043e\u043b\u0435\u0435 15 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432").required("\u042d\u0442\u043e \u043f\u043e\u043b\u0435 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e \u043a \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044e"),password:d.b().max(15,"\u041d\u0435 \u0431\u043e\u043b\u0435\u0435 15 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432").required("\u042d\u0442\u043e \u043f\u043e\u043b\u0435 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e \u043a \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044e")}),c=Object(j.d)({resolver:Object(p.a)(s)}),i=c.register,o=c.handleSubmit,u=c.formState.errors,h=o((function(e){return r(C(e))}));return Object(z.jsx)("div",{className:Z.a.formWrapper,children:n?Object(z.jsx)(R,{}):Object(z.jsxs)("form",{className:Z.a.form,onSubmit:h,children:[Object(z.jsx)("div",{className:Z.a.title,children:"\u0412\u0445\u043e\u0434"}),a&&Object(z.jsx)("div",{className:Z.a.formErrorMessageWrapper,children:Object(z.jsx)("span",{className:Z.a.errorMessage,children:"\u041d\u0435\u0432\u0435\u0440\u043d\u044b\u0439 \u043b\u043e\u0433\u0438\u043d \u0438/\u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c"})}),Object(z.jsxs)("div",{className:Z.a.inputsContainer,children:[Object(z.jsx)("label",{className:Z.a.label,htmlFor:"username",children:"\u041f\u043e\u0447\u0442\u0430"}),Object(z.jsx)("span",{className:Z.a.inputErrorMessageWrapper,children:Object(z.jsx)("span",{className:Z.a.errorMessage,children:null===(e=u.username)||void 0===e?void 0:e.message})}),Object(z.jsx)("input",Object(l.a)({className:Z.a.input,id:"username",type:"text"},i("username",{required:!0,maxLength:15}))),Object(z.jsx)("label",{className:Z.a.label,htmlFor:"password",children:"\u041f\u0430\u0440\u043e\u043b\u044c"}),Object(z.jsx)("span",{className:Z.a.inputErrorMessageWrapper,children:Object(z.jsx)("span",{className:Z.a.errorMessage,children:null===(t=u.password)||void 0===t?void 0:t.message})}),Object(z.jsx)("input",Object(l.a)({className:Z.a.input,id:"password",type:"password"},i("password",{required:!0})))]}),Object(z.jsxs)("div",{className:Z.a.controls,children:[Object(z.jsx)("div",{className:Z.a.register,children:"\u0417\u0430\u043f\u0440\u043e\u0441\u0438\u0442\u044c \u0434\u043e\u0441\u0442\u0443\u043f"}),Object(z.jsx)("button",{className:Z.a.submit,type:"submit",children:"\u0412\u043e\u0439\u0442\u0438"})]})]})})},Q=r(26),U=r.n(Q),X=r.p+"static/media/Logo.bc4f3ee8.svg";var Y=function(){return Object(z.jsx)("div",{className:U.a.pageWrapper,children:Object(z.jsxs)("div",{className:U.a.contentContainer,children:[Object(z.jsxs)("div",{className:U.a.logo,children:[Object(z.jsx)("img",{src:X,alt:"logo"}),Object(z.jsx)("div",{className:U.a.title,children:"Need for car"})]}),Object(z.jsx)("div",{className:U.a.formWrapper,children:Object(z.jsx)(K,{})})]})})},$=r(97),ee=r.n($),te=r(27),re=r.n(te);var ae=function(){return Object(z.jsxs)("footer",{className:re.a.footer,children:[Object(z.jsxs)("div",{className:re.a.links,children:[Object(z.jsx)("a",{className:re.a.link,href:"/",children:"\u0413\u043b\u0430\u0432\u043d\u0430\u044f \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0430"}),Object(z.jsx)("a",{className:re.a.link,href:"/",children:"NFD"})]}),Object(z.jsx)("div",{className:re.a.license,children:"Copyright \xa9 2020 Simbirsoft"})]})},ne=r(15),se=r(98),ce=r.n(se),ie=r(10),oe=r.n(ie),ue=function(){var e=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=Object(a.useState)(e),r=Object(h.a)(t,2),n=r[0],s=r[1],c=Object(a.useCallback)((function(){return s((function(e){return!e}))}),[]);return[n,c]}(!1),t=Object(h.a)(e,2),r=t[0],n=t[1];return Object(z.jsxs)("header",{className:oe.a.header,children:[Object(z.jsx)("div",{className:oe.a.burgerMenuButtonWrapper,children:Object(z.jsxs)("button",{className:ce()(oe.a.burgerButton,Object(ne.a)({},oe.a.active,r)),onClick:n,type:"button",children:[Object(z.jsxs)("svg",{className:oe.a.burger,version:"1.1",height:"32",width:"32",viewBox:"0 0 32 32",stroke:"black",children:[Object(z.jsx)("path",{className:oe.a.line,d:"M 2 7 H 30"}),Object(z.jsx)("path",{className:oe.a.line,d:"M 2 16 H 30"}),Object(z.jsx)("path",{className:oe.a.line,d:"M 2 25 H 30"})]}),Object(z.jsxs)("svg",{className:oe.a.x,version:"1.1",height:"32",width:"32",viewBox:"0 0 32 32",stroke:"black",children:[Object(z.jsx)("path",{className:oe.a.line,d:"M 3 29 L 29 3"}),Object(z.jsx)("path",{className:oe.a.line,d:"M 3 3 L 29 29"})]})]})}),Object(z.jsx)("div",{className:oe.a.notifications,children:Object(z.jsxs)("div",{className:oe.a.notificationsWrapper,children:[Object(z.jsx)("svg",{width:"18",height:"21",viewBox:"0 0 18 21",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:Object(z.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M15.375 9.04949V14.3727L17.5 16.502V17.5667H0.5V16.502L2.625 14.3727V9.04949C2.625 5.77038 4.35687 3.04489 7.40625 2.32093V1.59697C7.40625 0.713313 8.11812 0 9 0C9.88188 0 10.5938 0.713313 10.5938 1.59697V2.32093C13.6325 3.04489 15.375 5.78103 15.375 9.04949ZM11.2667 18.7C11.2667 19.9467 10.2467 20.9667 9 20.9667C7.742 20.9667 6.73334 19.9467 6.73334 18.7H11.2667Z",fill:"#818EA3"})}),Object(z.jsx)("div",{className:oe.a.count,children:"2"})]})}),Object(z.jsxs)("div",{className:oe.a.userDetails,children:["Admin",Object(z.jsx)("div",{className:oe.a.dropdownIconWrapper,children:Object(z.jsx)("svg",{width:"9",height:"5",viewBox:"0 0 9 5",xmlns:"http://www.w3.org/2000/svg",children:Object(z.jsx)("path",{d:"M0 0.5L4.25 5L8.5 0.5H0Z",fill:"#ABB6BF"})})})]})]})},le=r(34),de=r.n(le);var pe=function(){return Object(z.jsxs)("div",{className:de.a.pageContainer,children:[Object(z.jsx)(ue,{}),Object(z.jsx)("main",{className:de.a.main,children:Object(z.jsx)("section",{className:de.a.content,children:Object(z.jsx)("h2",{className:de.a.title,children:"\u0417\u0430\u043a\u0430\u0437\u044b"})})}),Object(z.jsx)(ae,{})]})},je=function(){var e=f(E),t=b();return Object(a.useEffect)((function(){t(F())}),[]),Object(z.jsx)("div",{className:ee.a.appWrapper,children:Object(z.jsxs)(u.d,{children:[Object(z.jsx)(u.b,{path:"/admin",children:e?Object(z.jsx)(pe,{}):Object(z.jsx)(u.a,{to:"/login"})}),Object(z.jsx)(u.b,{path:"/login",children:e?Object(z.jsx)(u.a,{to:"/admin"}):Object(z.jsx)(Y,{})}),Object(z.jsx)(u.b,{path:"/",children:Object(z.jsx)(u.a,{to:"/admin"})})]})})},he=Object(x.a)({reducer:{auth:J}});c.a.render(Object(z.jsx)(n.a.StrictMode,{children:Object(z.jsx)(i.a,{children:Object(z.jsx)(o.a,{store:he,children:Object(z.jsx)(je,{})})})}),document.getElementById("root"))},26:function(e,t,r){e.exports={pageWrapper:"LoginPage_pageWrapper__1pEGk",contentContainer:"LoginPage_contentContainer__fUA4f",logo:"LoginPage_logo__3YeLq",title:"LoginPage_title__27XRo",formWrapper:"LoginPage_formWrapper__2hO3T"}},27:function(e,t,r){e.exports={footer:"Footer_footer__3apGa",links:"Footer_links__Zgnjm",link:"Footer_link__1D86K",license:"Footer_license__3ZuDy"}},34:function(e,t,r){e.exports={pageContainer:"MainPage_pageContainer__1SDo-",main:"MainPage_main__2SVCz",title:"MainPage_title__2kz7W"}},58:function(e,t,r){e.exports={loaderWrapper:"Loader_loaderWrapper__1CJbf",loader:"Loader_loader__15EID",load8:"Loader_load8__bq-Qr"}},8:function(e,t,r){e.exports={formWrapper:"LoginForm_formWrapper__1af8a",title:"LoginForm_title__yaymJ",formErrorMessageWrapper:"LoginForm_formErrorMessageWrapper__1nKiG",inputErrorMessageWrapper:"LoginForm_inputErrorMessageWrapper__33LwE",errorMessage:"LoginForm_errorMessage__14JJ4",inputsContainer:"LoginForm_inputsContainer__ep_np",label:"LoginForm_label__1zwRH",input:"LoginForm_input__HsgdV",controls:"LoginForm_controls__d2JVQ",register:"LoginForm_register__VSf50",submit:"LoginForm_submit__3cDG5"}},97:function(e,t,r){e.exports={appWrapper:"App_appWrapper__1B5rP"}}},[[229,1,2]]]);
//# sourceMappingURL=main.82425030.chunk.js.map